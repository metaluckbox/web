{"version":3,"file":"pages/claim/index.js","sources":["webpack:///./pages/claim/index.vue?3cc2","webpack:///./pages/claim/index.vue","webpack:///./pages/claim/index.vue?2b34","webpack:///./pages/claim/index.vue?7537","webpack:///./components/Popup/Metamask.vue?33d2","webpack:///./assets/ico/metamask-fox.svg","webpack:///./components/Head.vue?b8e7","webpack:///./assets/logo/logo.png","webpack:///./components/Head.vue?470a","webpack:///./components/Head.vue","webpack:///./components/Head.vue?570a","webpack:///./components/Head.vue?9a6c","webpack:///./assets/ico/clone.png","webpack:///./components/Popup/Metamask.vue?c469","webpack:///./components/Popup/Metamask.vue?5597","webpack:///./components/Popup/Metamask.vue?597e","webpack:///./components/Popup/Metamask.vue","webpack:///./components/Popup/Metamask.vue?ec07","webpack:///./components/Popup/Metamask.vue?045d","webpack:///./components/Head.vue?56ff","webpack:///./components/Head.vue?ff3b","webpack:///./assets/ico/singin.png","webpack:///./utils/axios.js","webpack:///./common/minxins/mint.js","webpack:///./assets/ico/eth.png","webpack:///./assets/ico/box.png","webpack:///./assets/buy-back/1.png","webpack:///./pages/claim/index.vue?2aa6","webpack:///./pages/claim/index.vue?9f0c","webpack:///./pages/claim/index.vue?721a","webpack:///./assets/buy-back/9.png"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Head'),_vm._ssrNode(\" \"),(_vm.claimNftBoll)?_vm._ssrNode(\"<div class=\\\"container claim\\\" data-v-d32fc6c2>\",\"</div>\",[_vm._ssrNode(\"<div data-v-d32fc6c2>\",\"</div>\",[(_vm.claimNftIdAttr.length)?_vm._ssrNode(\"<ul data-v-d32fc6c2>\",\"</ul>\",[_vm._ssrNode((_vm._ssrList((_vm.claimNftIdAttr),function(val,key){return (\"<li data-v-d32fc6c2><img\"+(_vm._ssrAttr(\"src\",val.image))+\" class=\\\"portrait\\\" data-v-d32fc6c2> <h4 data-v-d32fc6c2>\"+_vm._ssrEscape(\"NFT-\"+_vm._s(val.id))+\"</h4> <p data-v-d32fc6c2><span data-v-d32fc6c2> Address </span> <label data-v-d32fc6c2>\"+_vm._ssrEscape(\" \"+_vm._s(_vm._f(\"userInformation\")(_vm.accounts[0]))+\" \")+\"</label></p> <p data-v-d32fc6c2><span data-v-d32fc6c2> Prize </span> <label data-v-d32fc6c2><img width=\\\"16px\\\"\"+(_vm._ssrAttr(\"src\",require(\"assets/ico/eth.png\")))+\" data-v-d32fc6c2>\"+_vm._ssrEscape(\"\\n              \"+_vm._s(val.jackpotAmount)+\" ETH\")+\"</label></p> <p class=\\\"opensea\\\" data-v-d32fc6c2>Claim</p></li>\")})))],2):_vm._ssrNode(\"<div style=\\\"text-align: center; padding: 30px 0px\\\" data-v-d32fc6c2>\",\"</div>\",[_c('a-spin',{attrs:{\"size\":\"large\"}})],1)])]):_vm._ssrNode((\"<div class=\\\"nothing\\\" data-v-d32fc6c2><img\"+(_vm._ssrAttr(\"src\",require(\"assets/ico/box.png\")))+\" data-v-d32fc6c2> <p data-v-d32fc6c2>You have nothing to claim</p></div>\"))],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Head from \"@/components/Head.vue\";\nimport minxins from \"@/common/minxins/mint.js\";\nimport { notification, message } from \"ant-design-vue\";\nexport default {\n  name: \"IndexPage\",\n  components: { Head },\n  mixins: [minxins],\n  data() {\n    return {};\n  },\n  methods: {\n    async claimEve(id) {\n      const claim = this.contract.methods.claim;\n      const gas = await this.estimateGas(claim(id));\n      claim(id)\n        .send({\n          from: this.accounts[0],\n          gas: gas,\n        })\n        .on(\"confirmation\", (confirmationNumber, receipt) => {\n          console.log(confirmationNumber, receipt);\n        })\n        .then((result) => {\n          console.log(result);\n          notification.success({\n            message: \"MetaMask\",\n            description: \"Received successfully\",\n          });\n          this.init();\n        });\n    },\n  },\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=d32fc6c2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&id=d32fc6c2&scoped=true&lang=less&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"d32fc6c2\",\n  \"68c6c32a\"\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {Head: require('/Users/talk/Desktop/document/RioDefi/rio/lottery/components/Head.vue').default})\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metamask.vue?vue&type=style&index=0&id=cae1559e&scoped=true&lang=less&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"e32ad1f6\", content, true, context)\n};","module.exports = __webpack_public_path__ + \"img/metamask-fox.7db9467.svg\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Head.vue?vue&type=style&index=0&id=04e97453&scoped=true&lang=less&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"5183b5b5\", content, true, context)\n};","module.exports = __webpack_public_path__ + \"img/logo.eb8b110.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_vm._ssrNode(\"<header data-v-04e97453>\",\"</header>\",[_vm._ssrNode(\"<ul class=\\\"container\\\" data-v-04e97453>\",\"</ul>\",[_vm._ssrNode(\"<li data-v-04e97453>\",\"</li>\",[_c('nuxt-link',{attrs:{\"to\":\"/\"}},[_c('img',{attrs:{\"src\":require(\"assets/logo/logo.png\")}})])],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<li data-v-04e97453>\",\"</li>\",[_c('nuxt-link',{attrs:{\"to\":\"/home\"}},[_vm._v(\" Mint \")]),_vm._ssrNode(\" \"),_c('nuxt-link',{attrs:{\"to\":\"/claim\"}},[_vm._v(\" Claim \")]),_vm._ssrNode(\" \"),_c('nuxt-link',{attrs:{\"to\":\"/nft\"}},[_vm._v(\" Collection \")]),_vm._ssrNode(\" \"),_c('nuxt-link',{attrs:{\"to\":\"/history\"}},[_vm._v(\" History \")]),_vm._ssrNode(\" \"+((_vm.$route.path == '/')?(\"<a href=\\\"#faq\\\" data-v-04e97453> FAQ </a>\"):\"<!---->\")+\" <p data-v-04e97453><img\"+(_vm._ssrAttr(\"src\",require(\"assets/ico/metamask-fox.svg\")))+\" data-v-04e97453> \"+((_vm.accounts[0])?(\"<a data-v-04e97453>\"+_vm._ssrEscape(_vm._s(_vm._f(\"userInformation\")(_vm.accounts[0])))+\"</a>\"):(\"<a data-v-04e97453> Connect Wallet </a>\"))+\"</p>\")],2)],2)]),_vm._ssrNode(\" \"),_c('Metamask')],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Web3 from \"web3\";\nimport Metamask from \"@/components/Popup/Metamask.vue\";\n// import minxins from \"@/common/minxins/mint.js\";\nexport default {\n  name: \"Head\",\n  components: { Metamask },\n  // mixins: [minxins],\n  data() {\n    return {\n      accounts: [],\n      web3: \"\",\n    };\n  },\n  async mounted() {\n    this.web3 = new Web3(window.ethereum);\n    this.accounts = await this.web3.eth.getAccounts();\n  },\n  // async mounted() {\n  //   this.web3 = new Web3(window.ethereum);\n  //   this.accounts = await this.web3.eth.getAccounts();\n  //   // this.accounts = await ethereum.enable();\n  //   ethereum.enable().then((accounts) => {\n  //     this.accounts = accounts;\n  //   });\n\n  //   ethereum.on(\"accountsChanged\", (accounts) => {\n  //     this.accounts = accounts;\n  //   });\n  //   ethereum.on(\"networkChanged\", (networkIDstring) => {\n  //     if (networkIDstring !== 4) {\n  //       this.switchEthereumChain(4);\n  //     }\n  //   });\n  //   if (ethereum.networkVersion !== 4) {\n  //     this.switchEthereumChain(4);\n  //   }\n  // },\n  methods: {\n    async singInEve() {\n      const getAccounts = await this.web3.eth.getAccounts();\n      this.accounts = await window.ethereum.enable();\n      if (getAccounts.length === 0) {\n        location.reload();\n      }\n    },\n    singUpEve() {\n      window.ethereum.request({\n        method: \"wallet_addEthereumChain\",\n        params: [\n          {\n            chainId: Web3.utils.numberToHex(56), // 目标链ID\n            chainName: \"Binance Smart Chain Mainnet\",\n            nativeCurrency: {\n              name: \"bnb\",\n              symbol: \"bnb\",\n              decimals: 18,\n            },\n            rpcUrls: [\"https://bsc-dataseed.binance.org\"], // 节点\n            blockExplorerUrls: [\"https://www.bscscan.com\"],\n          },\n        ],\n      });\n    },\n    switchEthereumChain(value) {\n      window.ethereum.request({\n        method: \"wallet_switchEthereumChain\",\n        params: [\n          {\n            chainId: Web3.utils.numberToHex(value), // 目标链ID\n          },\n        ],\n      });\n    },\n  },\n};\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Head.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Head.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Head.vue?vue&type=template&id=04e97453&scoped=true&\"\nimport script from \"./Head.vue?vue&type=script&lang=js&\"\nexport * from \"./Head.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./Head.vue?vue&type=style&index=0&id=04e97453&scoped=true&lang=less&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"04e97453\",\n  \"ebad04e0\"\n  \n)\n\nexport default component.exports","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAfCAYAAADwbH0HAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIDSURBVHgBvZcLccMwDEAdBmYwM1ggBMIYLAwWBs0QrEOQQigDh0FbBCmDlYEmrXJP8fztetOdmka29Cw7SuxGVQgAaLx0qAZVs/mCeiRtmuaiHiUEQ92gWsjLAbVHNbm4TQqIlzfUQa2zO6GeWRW3tajPoh+17XAG3lVllgZ1EZnMqB0PJuX3wn2dLCXZO+cW9Us4dqpSeJBu4BSrrYHuchlmYmmOkYZ707tVDxKKlZx2MbrZs9+dtYhhObb1G7rQqLg0SDaFDPLZsM8gbEYsYRca0egFceAiuICS9F7buMqaR+MeABMINpbAPegYaNcia0OGgW+mRNAkPAcV/Xa3ZcCfPd+8qITE4KVQ7uuWbk83B75JF3kAXgNlf7esi3JeqlA8eDGUffWNVwvmAFZAbaXvGgyFLwpvem/TrgpFgs/83xQ4SegIhaUm/Fvue5BPdV8DFfZiOFw/myT70joOQmvh4NWxfHPpWmgpHNbva+OMNhQY1u/qKDQC7yMJzNLYiayNsA+l0AC8V+tsF7Z3voPlhqq6jMB1JPYU6ixH9aEeJBSLYy4QK1lY77km+PueaxJLWLXhW+A/dpnCUU77z7pD/rOpGWiFX3R6m0ywES+v6npWInHnpBP/J3nidspKnjg+Ubd3n6c4e6rnI+Rlhms5ZZ+NRlUIB2zV7+zOqHNNdt+QN9JhdBzc3gAAAABJRU5ErkJggg==\"","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metamask.vue?vue&type=style&index=0&id=cae1559e&scoped=true&lang=less&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".popupMetamask .popup[data-v-cae1559e]{width:100%;height:100%;background-color:rgba(0,0,0,.8);z-index:11;top:50%}.popupMetamask .contentBox[data-v-cae1559e],.popupMetamask .popup[data-v-cae1559e]{color:#fff;position:fixed;left:50%;transform:translate(-50%,-50%)}.popupMetamask .contentBox[data-v-cae1559e]{top:30%;z-index:12;text-align:center}.popupMetamask .contentBox .content[data-v-cae1559e]{background:linear-gradient(108.4deg,#adafae 37.46%,#aeddcf 87.92%,#afffe8 157.07%),linear-gradient(107.35deg,rgba(199,255,252,.2) 38.1%,rgba(176,255,250,0) 132.78%);width:314px;height:197px}.popupMetamask .contentBox .content h3[data-v-cae1559e]{color:#fff;font-size:24px;font-weight:700;text-align:center;padding-top:22px}.popupMetamask .contentBox .content p label[data-v-cae1559e]{font-size:14px;display:block;margin-top:14px}.popupMetamask .contentBox .clone[data-v-cae1559e]{margin-top:18px}.popupMetamask .contentBox img[data-v-cae1559e]{cursor:pointer}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.bollPopup)?_c('div',{staticClass:\"popupMetamask\"},[_vm._ssrNode(\"<p class=\\\"popup\\\" data-v-cae1559e></p> <div class=\\\"contentBox\\\" data-v-cae1559e><div class=\\\"content\\\" data-v-cae1559e><h3 data-v-cae1559e>Connect your wallet</h3> <p data-v-cae1559e><img width=\\\"76px\\\"\"+(_vm._ssrAttr(\"src\",require(\"assets/ico/metamask-fox.svg\")))+\" data-v-cae1559e> <label data-v-cae1559e> MetaMask </label></p></div> <img\"+(_vm._ssrAttr(\"src\",require(\"assets/ico/clone.png\")))+\" class=\\\"clone\\\" data-v-cae1559e></div>\")]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: \"popupMetamask\",\n  data() {\n    return {\n      bollPopup: false,\n    };\n  },\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metamask.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metamask.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Metamask.vue?vue&type=template&id=cae1559e&scoped=true&\"\nimport script from \"./Metamask.vue?vue&type=script&lang=js&\"\nexport * from \"./Metamask.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./Metamask.vue?vue&type=style&index=0&id=cae1559e&scoped=true&lang=less&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"cae1559e\",\n  \"61c4a044\"\n  \n)\n\nexport default component.exports","export * from \"-!../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Head.vue?vue&type=style&index=0&id=04e97453&scoped=true&lang=less&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_GET_URL_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL_IMPORT_0___ = require(\"../assets/ico/singin.png\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".header[data-v-04e97453]{background-color:#242424}.header ul[data-v-04e97453]{margin:auto;height:80px;line-height:80px;border-bottom:1px solid #383838}.header ul[data-v-04e97453],.header ul li[data-v-04e97453]{display:flex;justify-content:space-between;align-items:center}.header ul li a[data-v-04e97453]{color:#fff;font-size:16px;margin-right:32px}.header ul li p[data-v-04e97453]{display:inline-block;background:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") no-repeat;background-size:100% 100%;height:47px;line-height:47px;padding:0 30px;width:230px;overflow:hidden;text-align:center}.header ul li p img[data-v-04e97453]{margin-right:20px;width:27px}.header ul li p a[data-v-04e97453]{margin:0}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","module.exports = __webpack_public_path__ + \"img/singin.aa106f2.png\";","//1、引入axios\nimport axios from 'axios'\nimport { Router } from 'vue-router'\nimport { Button, message } from 'ant-design-vue'\n//2、创建axios的实例\nlet httpService = axios.create({\n  baseUrl: process.env.NODE_ENV === 'development' ? '/devApi' : '/proApi', // TODO:具体的配置可以根据项目情况而来\n  timeout: 60000,\n})\n//5、get请求的封装\nexport function get(url, params = {}, headers = {}) {\n  return new Promise((resolve, reject) => {\n    httpService({\n      url: url,\n      method: 'get',\n      params: params,\n      headers: headers,\n    })\n      .then((res) => {\n        resolve(res.data)\n      })\n      .catch((err) => {\n        reject(err)\n      })\n  })\n}\n\nexport function post(\n  url,\n  params = {},\n  headers = { 'Content-Type': 'application/json' }\n) {\n  return new Promise((resolve, reject) => {\n    if (!params.game_id) {\n      params['game_id'] = parseInt(localStorage.getItem('gameid'))\n    }\n    params['access_token'] = localStorage.getItem('access_token')\n    httpService({\n      url: url,\n      method: 'post',\n      data: params,\n      headers: headers,\n    })\n      .then((res) => {\n        if (res.data.code == 1001) {\n          localStorage.removeItem('access_token')\n          window.location.replace(\"/\")\n        }\n        if (res.data.code) {\n          message.warning(res.data.message)\n        }\n        resolve(res.data || {})\n      })\n      .catch((err) => {\n        reject(err)\n      })\n  })\n}\n//7、将模块暴露\nexport default {\n  get,\n  post,\n}\n","import Web3 from \"web3\";\nimport moment from \"moment\";\nimport ABI from '@/common/json/abi.json'\nimport multicallABI from '@/common/json/multicall.json'\nimport { notification, message } from 'ant-design-vue';\nimport { get, post } from \"~/utils/axios.js\";\nexport default {\n  data() {\n    return {\n      accounts: [],\n      contract: \"\",\n      web3: \"\",\n      result: { mainThisNum: 0, jackpotAmount: 0 },\n      amount: null,\n      claimId: \"\",\n      currentEpoch: \"\",\n      itemDate: { \"h\": \"00\", \"m\": \"00\", \"s\": \"00\" },\n      nftIdAttr: [],\n      claimNftIdAttr: [],\n      mintLimitPerRound: 0,\n      mintPrice: 0,\n      jackpotAmount: 0,\n      balanceNum: 1,\n      claimNftBoll: true,\n      mintNum: 1,\n      contractAddr: \"0xe37971960574A60ec0078c0b370a62595AB288FA\",\n      singNum: 1000000000000000000\n    }\n  },\n\n  async mounted() {\n    this.web3 = new Web3(window.ethereum);\n    const getAccounts = await this.web3.eth.getAccounts();\n    this.accounts = await window.ethereum.enable();\n    if (getAccounts.length === 0) {\n      location.reload();\n    }\n    //监听账号切换\n    ethereum.on('accountsChanged', function (accounts) {\n      location.reload();\n    })\n    ethereum.on(\"networkChanged\", (networkIDstring) => {\n      console.log(networkIDstring)\n      if (networkIDstring !== '5') {\n        this.switchEthereumChain(5);\n      }\n      location.reload();\n    });\n    console.log(ethereum.networkVersion)\n    if (ethereum.networkVersion !== '5') {\n      this.switchEthereumChain(5);\n      notification.error({\n        message: 'MetaMask',\n        description: 'Network error, please switch'\n      })\n      return\n    }\n\n    this.contract = new this.web3.eth.Contract(\n      ABI,\n      this.contractAddr\n    );\n    this.multicall = new this.web3.eth.Contract(\n      multicallABI,\n      \"0x42ad527de7d4e9d9d011ac45b31d8551f8fe9821\"\n    );\n    this.init();\n  },\n  methods: {\n    async estimateGas(func, value = 0) {\n      try {\n        const gas = await func.estimateGas({\n          from: this.accounts[0],\n          value,\n        });\n        return Math.floor(gas * 1.2);\n      } catch (error) {\n        console.log(\"errr\", error.message);\n        const objStartIndex = error.message.indexOf(\"{\");\n        notification.error({\n          message: 'MetaMask',\n          description: error.message.slice(0, objStartIndex)\n        })\n      }\n    },\n    switchEthereumChain(value) {\n      window.ethereum.request({\n        method: \"wallet_switchEthereumChain\",\n        params: [\n          {\n            chainId: Web3.utils.numberToHex(value), // 目标链ID\n          },\n        ],\n      });\n    },\n    async init() {\n      this.nftIdAttr = []\n      this.claimNftIdAttr = []\n      this.contract.methods.mintLimitPerRound().call().then((value) => {\n        this.mintLimitPerRound = value\n      })\n      this.contract.methods.mintPrice().call().then((value) => {\n        this.mintPrice = value\n      })\n\n      const LastCurrentEpoch = await this.contract.methods.currentEpoch().call();\n      if (LastCurrentEpoch > 1) {\n        const { jackpotAmount } = await this.contract.methods.rounds(LastCurrentEpoch - 1).call();\n        this.jackpotAmount = jackpotAmount\n      }\n\n      const balanceNum = await this.contract.methods\n        .balanceOf(this.accounts[0])\n        .call();\n      this.balanceNum = parseInt(balanceNum);\n      console.log(balanceNum)\n      if (!this.balanceNum) {\n        this.claimNftBoll = false\n      }\n\n      const calls = []\n      for (let i = 0; i < this.balanceNum; i++) {\n        let call = [\n          this.contractAddr,\n          await this.contract.methods.tokenOfOwnerByIndex(this.accounts[0], i).encodeABI()\n        ]\n        calls.push(call)\n      }\n      const tokenIdsResult = await this.multicall.methods.aggregate(calls).call();\n      let tokenIds = tokenIdsResult[1]\n      const winnerNFT = await this.multicallEve(tokenIds, 'winnerNFT')\n      const winnerClaimed = await this.multicallEve(tokenIds, 'winnerClaimed')\n      const tokenURI = await this.multicallEve(tokenIds, 'tokenURI')\n\n\n      for (let i = 0; i < tokenIds.length; i++) {\n        const isWin = this.web3.utils.hexToBytes('0x' + winnerNFT[1][i].substring(2, 66))[31]\n        const epoch = this.web3.utils.hexToBytes('0x' + winnerNFT[1][i].substring(66, 130))[31]\n        const isBool = this.web3.utils.hexToBytes('0x' + winnerClaimed[1][i].substring(2, 66))[31]\n        const hexToAsciis = this.web3.utils.hexToAscii(tokenURI[1][i])\n        const { image } = await get(hexToAsciis.substring(64, hexToAsciis.length))\n\n        const { refundPrice, jackpotAmount } = await this.contract.methods.rounds(epoch).call();\n        this.nftIdAttr.push({\n          id: parseInt(tokenIds[i]),\n          boll: false,\n          isWin: isWin,\n          image: image,\n          refundPrice: refundPrice / this.singNum\n        })\n        if (isWin && (!isBool)) {\n          // const { jackpotAmount } = await this.contract.methods.rounds(epoch).call();\n          this.claimNftIdAttr.push({\n            id: parseInt(tokenIds[i]),\n            boll: false,\n            image: image,\n            jackpotAmount: jackpotAmount / this.singNum\n          })\n        }\n      }\n      if (!this.claimNftIdAttr.length) {\n        this.claimNftBoll = false\n      }\n    },\n    async multicallEve(tokenIds, type) {\n      let winners = []\n      for (let i = 0; i < tokenIds.length; i++) {\n        let tokenId = parseInt(tokenIds[i])\n        let winner = [\n          this.contractAddr,\n          await this.contract.methods[type](tokenId).encodeABI()\n        ]\n        winners.push(winner)\n      }\n      let winnerResult = await this.multicall.methods.aggregate(winners).call();\n      return winnerResult\n    }\n  },\n}","module.exports = __webpack_public_path__ + \"img/eth.98cba94.png\";","module.exports = __webpack_public_path__ + \"img/box.09e64a5.png\";","module.exports = __webpack_public_path__ + \"img/1.79c0f94.png\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=d32fc6c2&scoped=true&lang=less&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"6308064e\", content, true, context)\n};","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=d32fc6c2&scoped=true&lang=less&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_GET_URL_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL_IMPORT_0___ = require(\"../../assets/buy-back/1.png\");\nvar ___CSS_LOADER_URL_IMPORT_1___ = require(\"../../assets/buy-back/9.png\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".nothing[data-v-d32fc6c2]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.nothing p[data-v-d32fc6c2]{font-size:35px;color:#c1c1c1}.claim[data-v-d32fc6c2]{margin:auto}.claim ul[data-v-d32fc6c2]{margin-top:40px;display:grid;grid-template-columns:repeat(5,1fr)}.claim ul li[data-v-d32fc6c2]{background:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") no-repeat;background-size:100% 100%;padding:42px 53px 50px;position:relative}.claim ul li .portrait[data-v-d32fc6c2]{width:100%;border-radius:10px;min-height:200px}.claim ul li .selectedBoll[data-v-d32fc6c2]{position:absolute;left:22px;top:22px;cursor:pointer}.claim ul li h4[data-v-d32fc6c2]{font-size:18px;color:#fff;margin-top:10px;margin-bottom:0}.claim ul li p[data-v-d32fc6c2]{color:#5b5b5b;display:flex;justify-content:space-between;align-items:center}.claim ul li p label[data-v-d32fc6c2]{color:#fff}.claim ul li .opensea[data-v-d32fc6c2]{cursor:pointer;display:block;text-align:center;background:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \") no-repeat;background-size:100% 100%;height:54px;line-height:54px;color:#fff;font-size:16px;margin-top:16px}@media only screen and (max-width:1800px){.claim ul[data-v-d32fc6c2]{margin-top:40px;display:grid;grid-template-columns:repeat(4,1fr)}}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","module.exports = __webpack_public_path__ + \"img/9.be3f2dd.png\";"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAKA;AACA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AArBA;AAPA;;ACvCA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;;;;;;;;;;;;ACAA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAAA;AACA;AATA;AAHA;AAgBA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAHA;AAQA;AACA;AApCA;AAlCA;;ACjCA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;;;;;;;;ACAA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAPA;;ACrBA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACTA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAGA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAIA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAHA;AAQA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AA7GA;AA9DA;;;;;;;ACNA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;;;;A","sourceRoot":""}